!function(a,b){"function"==typeof define&&define.amd?define(["underscore","backbone.epoxy","customs"],b):"object"==typeof exports?module.exports=b(require("underscore","backbone.epoxy","customs")):a.bbCustoms=b(a._,a.Epoxy,a.customs)}(this,function(a,b,c){var d=function(a,b,c){var d=a.extend(b.View.mixin(),{validate:function(b,d){b||(b=this.toJSON()),d||(d={});var e=c.check(b,a.extend(this.customs,d.customs||{}));return e.isValid?void 0:(this._updateValidation(b,e.errs),e.errs)},_updateValidation:function(a,b){for(var c in a)b[c]?(this.validationErr=this.validationErr||{},this.validationErr[c]=b[c],this.trigger("invalid:attribute",c,this.validationErr[c])):this.trigger("valid:attribute",c)}}),e=a.extend(b.View.mixin(),{render:function(){"object"!=typeof this.bindings&&this._createFormBindings(),this.applyBindings()},_createFormBindings:function(){this.bindings={},this._bindType('input[type="radio"]',{defaultFn:this._defaultRadio,bindFn:this._bindRadioCheckbox}),this._bindType('input[type="checkbox"]',{defaultFn:this._defaultCheckbox,bindFn:this._bindRadioCheckbox}),this._bindType("select",{defaultFn:this._defaultSelect,bindFn:this._bindDefault}),this._bindType('input[type!="radio"][type!="checkbox"], textarea',{defaultFn:this._defaultDefault,bindFn:this._bindDefault})},_bindType:function(a,b){var c=this;c.$el.find(a).each(function(){c.model.attributes[this.name]||(c.model.attributes[this.name]=b.defaultFn.call(c,this)),b.bindFn.call(c,this)})},_defaultRadio:function(a){return this.$el.find(this._createAttrSel("name",a.name)+":checked").val()||""},_defaultCheckbox:function(a){var b=[];return this.$el.find(this._createAttrSel("name",a.name)+":checked").each(function(){b.append(this.value)}),b},_defaultSelect:function(a){var b=$(a).find(":selected")[0];return b.value||b.text},_defaultDefault:function(a){return a.value||""},_bindRadioCheckbox:function(a){var b=this._createAttrSel("name",a.name),c=this._createAttrSel("value",a.value);this.bindings[b+c]="checked:"+a.name},_bindDefault:function(a){var b=this._createAttrSel("name",a.name);this.bindings[b]="value:"+a.name+',events:["keyup"]'},_createAttrSel:function(a,b){return"["+a+'="'+b+'"]'}});return{model:d,view:e}}(a,b,c);return d});